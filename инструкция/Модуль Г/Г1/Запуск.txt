pip install python-multipart



–ó–∞–ø—É—Å—Ç–∏ API (–∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞)
uvicorn agents.g1_api.app:app --host 0.0.0.0 --port 8000

–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

http://127.0.0.1:8000/health –ª–∏–±–æ —ç—Ç–æ—Ç http://127.0.0.1:8000/docs

–¢—ã –¥–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å:

{
  "status": "ok",
  "redis": true,
  "model_path": "agents/v4_predict/artifacts/model_rf.pkl"
}


–ï—Å–ª–∏ redis: true ‚Äî –≤—Å—ë, Memurai —Ä–∞–±–æ—Ç–∞–µ—Ç, –∫–µ—à –≤–∫–ª—é—á—ë–Ω ‚úÖ

–ü—Ä–æ–≤–µ—Ä—å —Å–µ—Ä–≤–∏—Å Memurai
–ù–∞–∂–º–∏ Win + R
–í–≤–µ–¥–∏ services.msc
–ù–∞–π–¥–∏ Memurai
–°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å Running
–ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –Ω–∞–∂–º–∏ Start

–®–∞–≥ 1. –û—Ç–∫—Ä–æ–π Swagger

–í –±—Ä–∞—É–∑–µ—Ä–µ:
http://127.0.0.1:8000/docs

–¢—ã —É–≤–∏–¥–∏—à—å:
/auth/token
/danger
/forecast
/evacuation
/health

–≠—Ç–æ –∏ –µ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è OpenAPI-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Äî –ø—É–Ω–∫—Ç –∑–∞–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω.

–®–∞–≥ 2. –ü–æ–ª—É—á–∏ JWT-—Ç–æ–∫–µ–Ω
–í Swagger:
POST /auth/token
–í–≤–µ–¥–∏:

{
  "username": "user",
  "password": "user123"
}

–û—Ç–≤–µ—Ç:

{
  "access_token": "eyJhbGciOiJIUzI1NiIs...",
  "token_type": "bearer"
}


–ù–∞–∂–º–∏ Authorize ‚Üí –≤—Å—Ç–∞–≤—å —Ç–æ–∫–µ–Ω.

–®–∞–≥ 3. –ü—Ä–æ–≤–µ—Ä—å –æ—Å–Ω–æ–≤–Ω—ã–µ endpoint‚Äô—ã
üî• –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –æ–ø–∞—Å–Ω–æ—Å—Ç–∏
 –ö–û–û–†–î–ò–ù–ê–¢–´ –°–¢–ê–í–ò–ú –ò–ó –ë–ê–ó–´ –¢–ê–ë–õ–ò–¶–ê dataset_points
POST /danger

{
  "lat": 55.75,
  "lon": 37.61,
  "date": "2026-02-01"
}


–û—Ç–≤–µ—Ç:

{
  "risk_level": "medium",
  "score": 0.63,
  "cached": false
}


üì∏ –ö–∞–∫–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
–ú–∏–Ω–∏–º—É–º:
Swagger ‚Üí /auth/token ‚Üí —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
Swagger ‚Üí /danger ‚Üí 200
–¢–µ—Ä–º–∏–Ω–∞–ª —Å –ª–æ–≥–æ–º Redis connected
(–ø–æ –∂–µ–ª–∞–Ω–∏—é) /health